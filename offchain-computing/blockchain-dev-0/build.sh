#!/bin/bash

path=$PWD

for package in `ls -d */`;
do
	printf "┌──────────────────────────────────────────────────────────────────────────────────────────────────┐\n"
	printf "│ %-96s │\n" $path/$package
	printf "└──────────────────────────────────────────────────────────────────────────────────────────────────┘\n"

	cd $path/$package && docker image build -f ./Dockerfile -t iexechub/blockchain-dev-0-${package%?}:1.0.0 .

	if [ $? -eq 0 ];
	then
		printf "┌──────────────────────────────────────────────────────────────────────────────────────────────────┐\n"
		printf "│ %-96s │\n" "Success"
		printf "└──────────────────────────────────────────────────────────────────────────────────────────────────┘\n"
	else
		printf "┌──────────────────────────────────────────────────────────────────────────────────────────────────┐\n"
		printf "│ %-96s │\n" "Error"
		printf "└──────────────────────────────────────────────────────────────────────────────────────────────────┘\n"
	fi
done
